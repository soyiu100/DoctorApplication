<!-- Doctor Preview Sessions : /sessions -->

<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Preview Sessions</title>
    <th:block th:include="../fragments/header.html"></th:block>
</head>
<body>
<th:block th:include="../fragments/navbar.html"></th:block>
<div class="d-flex justify-content-center"
     style="padding-top: 2%;
     padding-left:20%;
     padding-right:20%;
     display: block !important;">

    <div>
        <h1>Scheduled Sessions</h1>
    </div>

    <div th:if="${sessions.size() != 0}" style="display: block;">
        <table class="table">
            <thead class="thead-dark">
            <tr>
                <th>Patient DOB</th>
                <th>Patient Name</th>
                <th>Date</th>
                <th>Time</th>
                <th>Duration in Minutes</th>
                <th>Doctor Status</th>
                <th>Patient Status</th>
                <th style="background-color: #fff;
                        color: #000;
                        border-color: #fff;">Access Session</th>
            </tr>
            </thead>

            <th:block th:each="sess : ${sessions}">
                <tr>
                    <!-- Request was made to not have room ID, as it was not neccessary -->
<!--                    <td th:if="${sess.roomId}" th:text="${sess.roomId}">...</td>-->

                    <td th:if="${sess.patient.getDob()}" th:text="${sess.patient.getDob()}">...</td>
                    <th:block th:if="${sess.patient.getFirstName()}" >
                        <td th:if="${sess.patient.getLastName()}"
                            th:text="${sess.patient.getFirstName() + ' ' + sess.patient.getLastName()}">...</td>
                    </th:block>

                    <td th:if="${sess.date}" th:text="${sess.date}">...</td>

                    <td th:if="${sess.time}" th:text="${sess.time}">...</td>
                    <td th:if="${sess.durationInMin}" th:text="${sess.durationInMin}">...</td>

                    <td th:if="${sess.doctorStatus}">Connected</td>
                    <td th:unless="${sess.doctorStatus}">Not Connected</td>

                    <td th:if="${sess.patientStatus}">Connected</td>
                    <td th:unless="${sess.patientStatus}"> Not Connected</td>

                    <td th:classappend="${sess.doctorStatus != 'JOINED'} ? table-link">
                        <div th:if="${sess.doctorStatus != 'JOINED'}" onclick="location.href='/sessionCall'">
                            Join Session
                        </div>
                    </td>
                </tr>
            </th:block>
        </table>
    </div>

    <div th:unless="${sessions.size() != 0}">
        No sessions are available yet. Try scheduling a session with the 'Create Session' button.
    </div>

    <div style="display: block; padding-top: 10px;">
        <a class="btn btn-outline-secondary" href="/create_sessions" style="float:right;">Create New Session</a>
    </div>

</div>

</body>
</html>